
jack_capture V0.9.61
Released 2011-10-28
Kjetil S. Matheussen



ABOUT
*****
jack_capture is a program for recording soundfiles with jack.

The default operation of the program is executed by writing "jack_capture"
in the terminal without any extra command line options:

   $ jack_capture

...which will record what you hear in your loudspeakers
into a stereo wav file.


Other features:

* Autogenerated filenames are unique and humanly readable.

* The 4GB size barrier for wav files is handled by continuing
  writing to new files when reaching 4GB.

* Supports all soundfile formats supported by sndfile.
  (wav, aiff, ogg, flac, wavex, au, etc.)       (option: -f <format>)

* Supports mp3 by using liblame.                (option: -mp3)

* Option for writing raw 16 bit data to stdout. (option: -ws)

* Built-in console meter, plus option for automatically starting and stopping
  the Meterbridge jack meter program. Port connections to Meterbridge
  are done automatically, and on the fly, by jack_capture.

* jack_capture can connect to any input or output jack port.

  When "connecting" to a jack input port (i.e. a writable port), jack_capture
  constantly monitors which jack ports which are connected
  to that input port, and makes sure jack_capture is always
  connected to the same ports.

  In other words, jack_capture will reconnect its ports automatically during
  recording to match the connections of the ports.
  This is for instance convenient when recording the playback ports since
  jack_capture can be started first, and then other programs can start
  and stop at any moment while all sound still should be recorded.

* No limit on the number of jack ports jack_capture can connect to.
  (I.e. the --port argument can be specified more than once, plus that
  it accepts wildcard arguments. For instance, jack_capture --port "*" will
  connect to all current jack ports, both input and output ports, except
  jack_capture's own ports.)

* Buffers are automatically increased during runtime to prevent
  underruns and to avoid wasting memory by preallocating too much.

* The disk thread is automatically reniced to a higher priority when 
  using more than half of the buffer.

* Significantly better recording performance than Ardour. (probably because
  jack_capture writes all channels into only one file and that it is
  not creating peak files). (tested on athlonXP)

* No problem writing at least 256 channels of 32 bit wav at once to a
  local hard drive. (tested on icore7)


BUILDING
********
Run autogen.sh, then use the standard ./configure && make && make install


COMMON USAGE 
************
$ jack_capture



ADVANCED USAGE
**************

jack_capture  [--bitdepth n] [--channels n] [--port port] [filename]
              [ -b        n] [ -c        n] [ -p    port]

"bitdepth" is by default FLOAT. It can be set to either 8, 16, 24 or 32. (for relevant formats)
"channels" is by default 2.
"port"     is by default set to the two first physical outputs. The "port" argument can be
           specified more than once.
"filename" is by default auotogenerated to "jack_capture_<number>.<format>"


Additional arguments:
[--duration s] or [-d s]         -> Recording is stopped after "s" seconds.
[--leading-zeros n] or [-z n]    -> "n" is the number of zeros to in the autogenerated filename.
                                    (-z 2 -> jack_capture_001.wav, and so on.) (default is 1)
[--format format] or [-f format] -> Selects fileformat provided by snfile.
                                    See http://www.mega-nerd.com/libsndfile/api.html#open
                                    (Default is wav for 1 or 2 channels, and wavex for more than 2.)
[--print-formats] or [-pf]       -> Prints all sound formats provided to sndfile to screen and then
                                    exits.
[--version] or [-v]              -> Prints out version.
[--silent] or [-s]               -> Suppress some common messages printed to the terminal.
[--verbose] or [-V]              -> Prints some extra information to the terminal.
[--mp3] or [-mp3]                -> Writes to an mp3 file using liblame (LAME).
                                    (the --format option has no effect using this option)
[--mp3-quality n] or [-mp3q n]   -> Selects mp3 quality provided by liblame. n=0 is best, n=9 is worst.
                                    Default n is 2. (0 uses the most amount of CPU, 9 uses the least)
[--mp3-bitrate n] or [-mp3b n]   -> Selects mp3 bitrate (in kbit/s).
                                    Default is set by liblame. (currently 128).
[--write-to-stdout] or [-ws]     -> Writes 16 bit little endian to stdout. (the --format option, the
                                    --mp3 option, and some others have no effect using this option).
[--disable-meter] or [-dm]       -> Disable console meter.
[--daemon]                       -> Don't read the console (stdin).
[--hide-buffer-usage] or [-hbu]  -> Disable buffer usage.
[--disable-console] or [-dc]     -> Disable console updates. Same as "-dm -hbu".
[--linear-meter] or [-lm]        -> Use linear scale for the console meter (default is dB scale)
[--dB-meter-reference or [-dBr]  -> Specify reference level for dB meter. (default=0)
[--meterbridge] or [-mb]         -> Start up meterbridge to monitor recorded sound.
[--meterbridge-type] or [-mt]    -> Specify type. vu (default), ppm, dpm, jf or sco.
[--meterbridge-reference]/[-mr]  -> Specify reference level for meterbidge.
[--jack-transport]/[-jt]         -> Start program, but do not start recording until jack transport has started rolling.
                                    When jack transport stops, the recording is stopped, and the program ends.
[--jack-transport-multi]/[-jtm]  -> Similar to --jack-transport, but do not end program when jack transport stops.
                                    Instead, record to a new file when jack_transport start rolling again.
                                    (not implemented yet)
[--manual-connections]/[-mc]     -> jack_capture will not connect any ports for you.
[--bufsize s] or [-B s]          -> Initial/minimum buffer size in seconds. Default is 8 seconds
                                    for mp3 files, and 4 seconds for all other formats.
[--maxbufsize] or [-MB]          -> Maximum buffer size in seconds. jack_capture will allocate.
                                    Default is 40. (Buffer is automatically increased during
                                    recording when needed. But it will never go beyond this size.)
[--filename] or [-fn]            -> Specify filename.
                                    (It's usually easier to set last argument instead)

Examples:

To record a stereo file of what you hear:
  $jack_capture

To record a stereo file of what you hear in the flac format:
 $jack_capture -f flac

To record a stereo file of what you hear in the ogg format:
 $jack_capture -f ogg

To record a stereo file of what you hear in the mp3 format:
 $jack_capture -mp3

To record a stereo file of what you hear in the wav format:
  $jack_capture --port system:playback_1 --port system:playback_2
****************************************************************************
**** NOTE! The above example does _exactly_ the same as the default!!!  ****
****************************************************************************

Same result as above, but using a different syntax:
  $jack_capture --channels 2 --port system:playback*

To record the output from jamin:
  $jack_capture --port jamin:out* sound_from_jamin.wav

To record all sound coming in to jamin:
  $jack_capture --port jamin:in* sound_to_jamin.wav

To record all sound coming in and out of jamin:
  $jack_capture --port jamin* sound_to_and_from_jamin.wav

To record a stereo file from the soundcard:
  $jack_capture -c 2 -p system:capture*



ACKNOWLEDGMENT
**************
Originally based on the jackrec program in the jack distribution
made by Paul Davies and Jack O'Quin. Not much left of that code now.
http://www.jackaudio.org

Peak indicator code for the console meter taken
from meterbridge by Steve Harris.
http://plugin.org.uk/meterbridge/

Code for writing to stdout was made by looking at http://mir.dnsalias.com/oss/jackstdout/start
made by Robin Gareus.

